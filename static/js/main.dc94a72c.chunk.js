(this.webpackJsonpemphasoft=this.webpackJsonpemphasoft||[]).push([[0],{210:function(e,n,t){e.exports=t(304)},219:function(e,n,t){},304:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(15),i=t.n(c),u=t(56),o=t(71),s=(t(218),t(219),t(31)),l=t(32),p=t(22),d="/",m="/auth",f="/addUser",h=t(16),b=t.n(h),v=t(41),E=t(309),x=t(308),g=t(188),O=t(306),w=t(307),j=t(169),y=t(170),A=t.n(y),S={baseURL:"http://emphasoft-test-assignment.herokuapp.com",responseType:"json",headers:{"Content-Type":"application/json"}},k=new function e(){var n=this;Object(j.a)(this,e),this.apiClient=void 0,this.usernameApi=void 0,this.passwordApi=void 0,this.fetchTokenApi=function(){var e=Object(v.a)(b.a.mark((function e(t){var r,a,c,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.username,a=t.password,c=JSON.stringify({username:r,password:a}),e.next=4,n.apiClient.post("/api-token-auth/",c);case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),this.fetchUsersApi=function(){var e=Object(v.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.apiClient.get("/api/v1/users/",{headers:{Authorization:"Token ".concat(t)}});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),this.addUserApi=function(){var e=Object(v.a)(b.a.mark((function e(t,r){var a,c,i,u,o,s,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.username,c=r.password,i=r.firstName,u=r.lastName,o=r.isActive,s=JSON.stringify({username:a,password:c,first_name:i,last_name:u,is_active:o}),e.next=4,n.apiClient.post("/api/v1/users/",s,{headers:{Authorization:"Token ".concat(t)}});case 4:return l=e.sent,e.abrupt("return",l.data);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),this.deleteUserApi=function(){var e=Object(v.a)(b.a.mark((function e(t,r){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.apiClient.delete("/api/v1/users/".concat(r),{headers:{Authorization:"Token ".concat(t)}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),this.usernameApi="test_super",this.passwordApi="Nf<U4f<rDbtDxAPn",this.apiClient=A.a.create(S)},U=function(e){return function(){var n=Object(v.a)(b.a.mark((function n(t){var r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t({type:"USERS_LOADING",payload:{isLoading:!0}}),n.next=4,k.fetchUsersApi(e);case 4:r=n.sent,t({type:"USERS_SUCCESS",payload:{users:r,isLoading:!1}}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),t({type:"USERS_FAILURE",payload:{isLoading:!1}});case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()};function L(){var e=Object(s.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return L=function(){return e},e}function N(){var e=Object(s.a)(["\n  margin: 0;\n"]);return N=function(){return e},e}var _=l.a.h2(N()),C=l.a.div(L()),T=function(e){return a.a.createElement(C,null,a.a.createElement(_,null,"id/username"),a.a.createElement(o.b,{to:f},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"))};function R(){var e=Object(s.a)(["\n  margin-right: 8px;\n"]);return R=function(){return e},e}function I(){var e=Object(s.a)(["\n  max-width: 600px;\n  width: 100%;\n"]);return I=function(){return e},e}var D=l.a.div(I()),F=Object(l.a)(x.a.Text)(R()),K=function(e){var n=Object(u.b)(),t=Object(u.c)((function(e){return e.reducerAuth})).token,r=Object(u.c)((function(e){return e.reducerUsers})),c=r.users,i=r.isLoading;a.a.useEffect((function(){n(U(t))}),[]);var o=function(){var e=Object(v.a)(b.a.mark((function e(r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.deleteUserApi(t,r);case 2:return e.next=4,n(U(t));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,i?a.a.createElement(g.a,null):a.a.createElement(D,null,a.a.createElement(O.a,{orientation:"left"},"List users"),a.a.createElement(w.b,{header:a.a.createElement(T,null),bordered:!0,dataSource:c,renderItem:function(e){return a.a.createElement(w.b.Item,null,a.a.createElement("div",null,a.a.createElement(F,null,e.id),a.a.createElement(F,null,e.username)),a.a.createElement("div",null,a.a.createElement(E.a,{onClick:function(){return o(e.id)}})))}})))},z=t(61),q=t(62),G=t(208);function J(){var e=Object(s.a)(["\n  padding: 8px 0;\n  border: none;\n  border-bottom: 1px solid #000;\n  background: none;\n  font-weight: 700;\n\n  &:focus {\n    outline: none;\n  }\n"]);return J=function(){return e},e}var W=Object(l.a)(z.b)(J()),B=function(e){var n=e.name,t=e.type;return a.a.createElement(a.a.Fragment,null,a.a.createElement(W,{name:n,type:t,placeholder:"Enter ".concat(n,"...")}),a.a.createElement(z.a,{name:n},(function(e){return a.a.createElement("span",{style:{color:"red"}},e)})))},M=function(e){return function(){var n=Object(v.a)(b.a.mark((function n(t){var r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t({type:"TOKEN_LOADING"}),n.next=4,k.fetchTokenApi(e);case 4:r=n.sent,t({type:"TOKEN_SUCCESS",payload:r.token}),n.next=12;break;case 8:throw n.prev=8,n.t0=n.catch(0),t({type:"TOKEN_FAILURE"}),n.t0;case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()};function P(){var e=Object(s.a)(["\n  padding: 4px;\n  margin-top: 8px;\n  border: none;\n  background: none;\n  font-weight: 700;\n  cursor: pointer;\n\n  &:focus {\n    outline: none;\n  }\n"]);return P=function(){return e},e}function V(){var e=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: center;\n  & *:not(:last-child) {\n    margin-bottom: 2px;\n  }\n"]);return V=function(){return e},e}function Z(){var e=Object(s.a)(["\n  width: 600px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]);return Z=function(){return e},e}var $=l.a.div(Z()),H=Object(l.a)(z.c)(V()),Q=Object(l.a)(z.b)(P()),X=q.b().shape({username:q.c().required("Enter username"),password:q.c().required("Enter password")}),Y=function(e){var n=Object(u.b)(),t=Object(p.g)();return a.a.createElement(z.d,{initialValues:{username:"test_super",password:"Nf<U4f<rDbtDxAPn"},validationSchema:X,onSubmit:function(){var e=Object(v.a)(b.a.mark((function e(r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(M(r));case 3:return e.next=5,t.push(d);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),G.b.error("\u041d\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c...");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}()},(function(e){var n=e.handleSubmit;return a.a.createElement($,null,a.a.createElement(H,{onSubmit:n},a.a.createElement(B,{name:"username",type:"text"}),a.a.createElement(B,{name:"password",type:"password"}),a.a.createElement(Q,{type:"submit",value:"Submit"})))}))};function ee(){var e=Object(s.a)(["\n  margin: 0 8px 0 0;\n"]);return ee=function(){return e},e}function ne(){var e=Object(s.a)(["\n  display: flex;\n  align-items: center;\n  padding: 8px 0;\n  border: none;\n  border-bottom: 1px solid #000;\n  background: none;\n  font-weight: 700;\n  width: 100%;\n"]);return ne=function(){return e},e}function te(){var e=Object(s.a)(["\n  padding: 4px;\n  margin-top: 8px;\n  border: none;\n  background: none;\n  font-weight: 700;\n  cursor: pointer;\n\n  &:focus {\n    outline: none;\n  }\n"]);return te=function(){return e},e}function re(){var e=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: center;\n  & *:not(:last-child) {\n    margin-bottom: 2px;\n  }\n"]);return re=function(){return e},e}function ae(){var e=Object(s.a)(["\n  width: 600px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]);return ae=function(){return e},e}var ce=l.a.div(ae()),ie=Object(l.a)(z.c)(re()),ue=Object(l.a)(z.b)(te()),oe=l.a.div(ne()),se=l.a.p(ee()),le=q.b().shape({username:q.c().required("Enter username"),password:q.c().required("Enter password").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/,"8+ \u0431\u0443\u043a\u0432, 1 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u0430\u044f, 1 \u0446\u0438\u0444\u0440\u0430."),first_name:q.c(),last_name:q.c(),is_active:q.a()}),pe=function(e){var n=Object(u.c)((function(e){return e.reducerAuth})).token,t=Object(p.g)();return a.a.createElement(z.d,{initialValues:{username:"",password:"",firstName:"",lastName:"",isActive:!1},validationSchema:le,onSubmit:function(){var e=Object(v.a)(b.a.mark((function e(r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.addUserApi(n,r);case 3:return e.next=5,t.push(d);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),G.b.error("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}()},(function(e){var n=e.handleSubmit;return a.a.createElement(ce,null,a.a.createElement(ie,{onSubmit:n},a.a.createElement(B,{name:"username",type:"text"}),a.a.createElement(B,{name:"password",type:"password"}),a.a.createElement(B,{name:"firstName",type:"text"}),a.a.createElement(B,{name:"lastName",type:"text"}),a.a.createElement(oe,null,a.a.createElement(se,null,"is Active?"),a.a.createElement(B,{name:"isActive",type:"checkbox"})),a.a.createElement(ue,{type:"submit",value:"Send user"})))}))},de=t(207),me=function(e){var n=e.component,t=Object(de.a)(e,["component"]),r=Object(u.c)((function(e){return e.reducerAuth})).isAuth;return a.a.createElement(p.b,Object.assign({},t,{render:function(e){return r?a.a.createElement(n,e):a.a.createElement(p.a,{to:{pathname:m}})}}))};function fe(){var e=Object(s.a)(["\n  min-width: 100vw;\n  min-height: 100vh;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]);return fe=function(){return e},e}var he=l.a.div(fe()),be=function(){return a.a.createElement(he,null,a.a.createElement(p.d,null,a.a.createElement(p.b,{path:m,component:Y}),a.a.createElement(me,{path:d,exact:!0,component:K}),a.a.createElement(me,{path:f,component:pe}),a.a.createElement(p.a,{to:{pathname:m}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ve=t(72),Ee=t(201),xe=t(202),ge={isLoading:!1,token:null,isAuth:!1},Oe=t(85),we={users:[],isLoading:!1},je=Object(ve.combineReducers)({reducerAuth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"TOKEN_LOADING":return{isLoading:!0,isAuth:!1};case"TOKEN_SUCCESS":return{isLoading:!1,token:n.payload,isAuth:!0};case"TOKEN_FAILURE":return{isLoading:!1,isAuth:!1};default:return e}},reducerUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"USERS_LOADING":return Object(Oe.a)(Object(Oe.a)({},e),{},{isLoading:n.payload.isLoading});case"USERS_SUCCESS":return Object(Oe.a)(Object(Oe.a)({},e),{},{users:n.payload.users,isLoading:n.payload.isLoading});case"USERS_FAILURE":return Object(Oe.a)(Object(Oe.a)({},e),{},{isLoading:n.payload.isLoading});default:return e}}}),ye=Object(ve.createStore)(je,Object(xe.composeWithDevTools)(Object(ve.applyMiddleware)(Ee.a)));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(o.a,null,a.a.createElement(u.a,{store:ye},a.a.createElement(be,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[210,1,2]]]);
//# sourceMappingURL=main.dc94a72c.chunk.js.map